@using L2M.Models

@{
    ViewData["Title"] = "Home Page";
    //Lấy theo nỗi bật
    List<Song> featuredSongs = ViewData["FeaturedSongs"] as List<Song>;
    //Lấy theo ngày tạo
    List<Song> newSongs = ViewData["NewSongs"] as List<Song>;
    //Lấy theo lượt thích
    List<Song> likeSongs = ViewData["LikeSongs"] as List<Song>;
    //Lấy theo lượt view 
    List<Song> topSongs = ViewData["TopSongs"] as List<Song>;
    //Lấy tất cả album
    List<Album> albums = ViewData["Albums"] as List<Album>;
}

<!-- ##### Hero Area Start ##### -->
    <section class="hero-area">
        <div class="hero-slides owl-carousel">
            <!-- Single Hero Slide -->
            <div class="single-hero-slide d-flex align-items-center justify-content-center">
                <!-- Slide Img -->
                <div class="slide-img bg-img" style="background-image: url(~/img/bg-img/bg-1.jpg); width: 100%"></div>
                <!-- Slide Content -->
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <div class="hero-slides-content text-center">
                                <h6 data-animation="fadeInUp" data-delay="100ms">L2M</h6>
                                <h2 data-animation="fadeInUp" data-delay="300ms">Nơi chia sẻ âm nhạc <span>Nơi chia sẻ âm nhạc</span></h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- ##### Hero Area End ##### -->

    <!-- ##### Latest Albums Area Start ##### -->
    <section class="latest-albums-area section-padding-100">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="albums-slideshow owl-carousel">
                    @foreach(var item in featuredSongs)
                    {
                        <div class="single-album">
                            <img src="@Url.Content(item.ImgUrl)" alt="@item.Title">
                            <div class="album-info">
                                <a asp-controller="Songs" asp-action="Detail" asp-route-id="@item.SongId" >
                                    <h5>@item.Title</h5>
                                </a>
                                    @if(item.Artists != null)
                                    {
                                        <p>
                                        @foreach(var artist in item.Artists?.Select((value, i) => new { i, value }))
                                        {
                                            @artist.value.Name @((artist.i < item.Artists.Count() - 1)? "," : "")
                                        }
                                        </p>
                                    }
                            </div>
                        </div>
                    }
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- ##### Latest Albums Area End ##### -->

    <!-- ##### Buy Now Area Start ##### -->
    <section class="oneMusic-buy-now-area has-fluid bg-gray section-padding-100">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="section-heading style-2">
                        <p>See what’s new</p>
                        <h2>Buy What’s New</h2>
                    </div>
                </div>
            </div>

            <div class="row">

                <!-- Single Album Area -->
                <div class="col-12 col-sm-6 col-md-4 col-lg-2">
                    <div class="single-album-area wow fadeInUp" data-wow-delay="100ms">
                        <div class="album-thumb">
                            <img src="~/img/bg-img/b1.jpg" alt="">
                            <!-- Album Price -->
                            <div class="album-price">
                                <p>$0.90</p>
                            </div>
                            <!-- Play Icon -->
                            <div class="play-icon">
                                <a href="#" class="video--play--btn"><span class="icon-play-button"></span></a>
                            </div>
                        </div>
                        <div class="album-info">
                            <a href="#">
                                <h5>Garage Band</h5>
                            </a>
                            <p>Radio Station</p>
                        </div>
                    </div>
                </div>

                <!-- Single Album Area -->
                <div class="col-12 col-sm-6 col-md-4 col-lg-2">
                    <div class="single-album-area wow fadeInUp" data-wow-delay="200ms">
                        <div class="album-thumb">
                            <img src="~/img/bg-img/b2.jpg" alt="">
                        </div>
                        <div class="album-info">
                            <a href="#">
                                <h5>Noises</h5>
                            </a>
                            <p>Buble Gum</p>
                        </div>
                    </div>
                </div>
                @foreach(var item in albums)
                {
                    <div class="col-12 col-sm-6 col-md-4 col-lg-2">
                        <div class="single-album-area wow fadeInUp" data-wow-delay="200ms">
                            <div class="album-thumb">
                                <img src="@Url.Content(item.ImgUrl)" alt="@item.Title">
                            </div>
                            <div class="album-info">
                                <a asp-controller="Albums" asp-action="Detail" asp-route-id="@item.AlbumId">
                                    <h5>@item.Title</h5>
                                </a>
                            </div>
                        </div>
                    </div>
                }

            </div>

            <div class="row">
                <div class="col-12">
                    <div class="load-more-btn text-center wow fadeInUp" data-wow-delay="300ms">
                        <a href="#" class="btn oneMusic-btn">Load More <i class="fa fa-angle-double-right"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- ##### Buy Now Area End ##### -->

    <!-- ##### Featured Artist Area Start ##### -->
    <section class="featured-artist-area section-padding-100 bg-img bg-overlay bg-fixed" style="background-image: url(img/bg-img/bg-4.jpg);">
        <div class="container">
            <div class="row align-items-end">
                <div class="col-12 col-md-5 col-lg-4">
                    <div class="featured-artist-thumb">
                        <img src="~/img/bg-img/fa.jpg" alt="">
                    </div>
                </div>
                <div class="col-12 col-md-7 col-lg-8">
                    <div class="featured-artist-content">
                        <!-- Section Heading -->

                        <div class="section-heading white text-left mb-30">
                            <p>See what’s new</p>
                            <h2>Buy What’s New</h2>
                        </div>
                        <p>Nam tristique ex vel magna tincidunt, ut porta nisl finibus. Vivamus eu dolor eu quam varius rutrum. Fusce nec justo id sem aliquam fringilla nec non lacus. Suspendisse eget lobortis nisi, ac cursus odio. Vivamus nibh velit, rutrum at ipsum ac, dignissim iaculis ante. Donec in velit non elit pulvinar pellentesque et non eros.</p>
                        <div class="song-play-area">
                            <div class="song-name">
                                <p>01. Main Hit Song</p>
                            </div>
                            <audio preload="auto" controls>
                                <source src="audio/dummy-audio.mp3">
                            </audio>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- ##### Featured Artist Area End ##### -->

    <!-- ##### Miscellaneous Area Start ##### -->
    <section class="miscellaneous-area section-padding-100-0">
        <div class="container">
            <div class="row">
                <!-- ***** Weeks Top ***** -->
                <div class="col-12 col-lg-4">
                    <div class="weeks-top-area mb-100">
                        <div class="section-heading text-left mb-50 wow fadeInUp" data-wow-delay="50ms">
                            <p>See what’s new</p>
                            <h2>The most liked songs</h2>
                        </div>

                        @foreach(var item in likeSongs)
                        {
                            <div class="single-top-item d-flex wow fadeInUp" data-wow-delay="100ms">
                                <div class="thumbnail">
                                    <img src="@Url.Content(item.ImgUrl)" alt="">
                                </div>
                                <div class="content-">
                                    <h6>@item.Title</h6>
                                    @if(item.Artists != null)
                                    {
                                        <p>
                                        @foreach(var artist in item.Artists?.Select((value, i) => new { i, value }))
                                        {
                                            @artist.value.Name @((artist.i < item.Artists.Count() - 1)? "," : "")
                                        }
                                        </p>
                                    }
                                </div>
                            </div>
                        }
                    </div>
                </div>

                <!-- ***** New Hits Songs ***** -->
                <div class="col-12 col-lg-4">
                    <div class="new-hits-area mb-100">
                        <div class="section-heading text-left mb-50 wow fadeInUp" data-wow-delay="50ms">
                            <p>See what’s new</p>
                            <h2>New Hits</h2>
                        </div>
                        @foreach(var item in newSongs)
                        {
                            <div class="single-new-item d-flex align-items-center justify-content-between wow fadeInUp" data-wow-delay="100ms">
                                <div class="first-part d-flex align-items-center">
                                    <div class="thumbnail">
                                        <img src="@Url.Content(item.ImgUrl)" alt="">
                                    </div>
                                    <div class="content-">
                                        <h6>@item.Title</h6>
                                        @if(item.Artists != null)
                                        {
                                            <p>
                                            @foreach(var artist in item.Artists?.Select((value, i) => new { i, value }))
                                            {
                                                @artist.value.Name @((artist.i < item.Artists.Count() - 1)? "," : "")
                                            }
                                            </p>
                                        }
                                    </div>
                                </div>
                                <audio preload="auto" controls>
                                    <source src="@item.Path">
                                </audio>
                            </div>
                        }
                    </div>
                </div>

                <!-- ***** Popular Artists ***** -->
                <div class="col-12 col-lg-4">
                    <div class="popular-artists-area mb-100">
                        <div class="section-heading text-left mb-50 wow fadeInUp" data-wow-delay="50ms">
                            <p>See what’s new</p>
                            <h2>Popular Artist</h2>
                        </div>

                        <!-- Single Artist -->
                        <div class="single-artists d-flex align-items-center wow fadeInUp" data-wow-delay="100ms">
                            <div class="thumbnail">
                                <img src="~/img/bg-img/pa1.jpg" alt="">
                            </div>
                            <div class="content-">
                                <p>Sam Smith</p>
                            </div>
                        </div>
                        @foreach(var item in topSongs)
                        {
                            <div class="single-artists d-flex align-items-center wow fadeInUp" data-wow-delay="100ms">
                                <div class="thumbnail">
                                    <img src="@Url.Content(item.ImgUrl)" alt="">
                                </div>
                                <div class="content-">
                                    <h6>@item.Title</h6>
                                    @if(item.Artists != null)
                                        {
                                            <p>
                                            @foreach(var artist in item.Artists?.Select((value, i) => new { i, value }))
                                            {
                                                @artist.value.Name @((artist.i < item.Artists.Count() - 1)? "," : "")
                                            }
                                            </p>
                                        }
                                </div>
                            </div>
                        }

                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- ##### Miscellaneous Area End ##### -->
